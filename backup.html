 <!DOCTYPE html>
<html lang="pt-br">
<head>
	<title>Backup Local RaioX3 MAF</title>
	<meta charset="utf-8">
	<link rel="shortcut icon" type="imagex/png" href="./logo.ico">
	<link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
	<center>
    <div id="main">      
	  <h2 class='texto'>Backup manual das marcações RaioX MAF+</h2>
      <button id="exporta" class='texto'>Copiar</button>	  
	  
	  <textarea id='campo' placeholder="Cole aqui o backup para restaurar." style='wtdth: 600px;height: 200px;resize: none;'></textarea>
	  <button id="importa" class='texto'>Restaurar</button>	  	  
	  
	  <br>
	  ::MSP:: nov/2021.
	  <br>
	</div>
	</center>	

	<script type="text/javascript">	
	
	document.getElementById('exporta').addEventListener('click', exportaUserData);	
	
	document.getElementById('importa').addEventListener('click', importaUserDataSobrescreveLocalStorage);	
		
	//=============================================================================================
	
	//Copiar
	function exportaUserData(){
		//if(confirm("Confirma efetuar a cópia?")){
			//let stamp 			= geraStamp();
			let mafVisto 	= localStorage.getItem("mafVisto");
			let mafWatch 	= localStorage.getItem("mafWatch");
			let mafLike 	= localStorage.getItem("mafLike");			
			//Campos para txt = mafVisto + mafWatch + mafLike
			let campo = document.getElementById('campo')			
			campo.value = mafVisto + ";" + mafWatch + ";" + mafLike;
			
		alert("Cópia finalizada. Selecione todo o texto (CTRL+A), copie (CTRL+C) e cole (CRTL+V) em qualquer editor de texto ou e-mail, para cópia ou continuar de outro computador.");
		}
	//}
		
	//Restaurar
	function importaUserDataSobrescreveLocalStorage(){
		if(confirm("Confirma sobrescrever as bases com a cópia?")){			
			//Campos do txt			
			let campo = document.getElementById('campo').value
			campo = campo.split(";")			
			
			if(campo.length==3){
				let mafVisto 	= campo[0];
				let mafWatch 	= campo[1];
				let mafLike 	= campo[2];				
				localStorage.setItem("mafVisto", mafVisto);
				localStorage.setItem("mafWatch", mafWatch);
				localStorage.setItem("mafLike", mafLike);
				alert("Bases restauradas.");
			}else{
				alert("Não foi possível concluir. Bloco de backup fora do padrão, verifique se colou corretamente.");
			}		
		}
	}
		
	</script>	
	
</body>	
</html>